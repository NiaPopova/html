<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8">
  <link rel="stylesheet" type=text/css href="mecho.css">
  <script src="mecho.min.js"></script>
   <style>
   .center
   {
     color: purple;
   }
  </style>
  <script>
  
    var T=3;
    var stopTime=0;
    button('ground','space',go,4,0);
    
    function main()
    {
      scene = new Mecho();
      scene.sky = [1,1,1];
      scene.ground = Mecho.METRIC;
      scene.onTime = animation;

      lowerPart = box([0,0,0],16,0.7,1.5);
      lowerPart.material = Mecho.YELLOW;
    
      leftPart = box([-7.25,0,1.5],1.5,0.7,8);
      leftPart.material = Mecho.YELLOW;
 
      rightPart = box([7.25,0,1.5],1.5,0.7,8);
      rightPart.material = Mecho.YELLOW;
 
      upperPart = box([0,0,9.5],16,0.7,1.5);
      upperPart.material = Mecho.YELLOW;

      W1 = box([-3,0,2],5,0.1,7);
      W1.material=Mecho.BLUE;
    
      W2 = box([3,0,2],5,0.1,7);
      W2.material=Mecho.BLUE;  

      T1 = tube([-4,0,9],0.2,0.2,0.2);
      T1.material = Mecho.BLACK;

      T2 = tube([2,0,9],0.2,0.2,0.2);
      T2.material = Mecho.BLACK;
      
      T3 = tube([-4,0,2],0.2,0.2,0.2);
      T3.material = Mecho.BLACK;

      T4 = tube([2,0,2],0.2,0.2,0.2);
      T4.material = Mecho.BLACK;
    }
  
    function go()
    { 
      stopTime = Mecho.dTime+T;
      if(this.state == 1)
      {
        W1.center = [-5,-3,2]; 
      }
      else if(this.state==2)
      {
        W2.center = [-3,0,2];
      }
      else if (this.state == 3)
      {

      }
      else if(this.state == 4)
      {
 
      }
    }
  
    function animation()
    {
      stopTime=Mecho.dTime+T;
      if(Mecho.time<=stopTime)
      { 
        for(var i = this.state;i<=4;++i)
        {
          if(i == 1)
          {  
            W1.rotH = 90/PI*(Mecho.time);
            W1.center.x += ( -5- W1.center.x)*Mecho.dTime/T;
            W1.center.y += ( -3- W1.center.y)*Mecho.dTime/T;
            T1.center.x += (-7-T1.center.x)*Mecho.dTime/T;
            T1.center.y += (-2-T1.center.y)*Mecho.dTime/T;
            T3.center.x += (-6.6-T3.center.x)*Mecho.dTime/T;
            T3.center.y += (-2-T3.center.y)*Mecho.dTime/T;  
          }
          else if(i == 2)
          {
            W2.center.x += (-3-W2.center.x)*Mecho.dTime/T;
            T2.center.x += (-7.5-T2.center.x)*Mecho.dTime/T;
            T4.center.x += (-7.5-T4.center.x)*Mecho.dTime/T;
          }
        }
      }
     }  
   </script>
  </head>
 <body onload = "main()">
  <h1 class = "center">Механизъм за двоен прозорец</h1> 
  <canvas width="982" height="722" class="mechocanvas" id="suica_canvas" style="cursor: auto;"></canvas>
  <div class="mechobutton">
    <div class="mechocaption">space</div>
    <img src="images/buttons/ground.png">
  </div>
  </body>
 </html>